<p-table [paginator]="true" [rows]="rows" [rowsPerPageOptions]="rowsPerPageOptions" [lazy]="lazy"
  [resetPageOnSort]="false" [totalRecords]="totalRecords" [loading]="loading" [scrollable]="true" [columns]="columns"
  [value]="value" (onLazyLoad)="onLazyLoad($event)" (onSort)="onSort($event)">

  <ng-template pTemplate="colgroup" let-columns>
    <colgroup>
      <col *ngFor="let col of columns" [style.width.px]="150 * (col.span || 1)">
      <ng-container *ngIf="actionsCol">
        <ng-container *ngTemplateOutlet="actionsCol"></ng-container>
      </ng-container>
      <ng-container *ngIf="!actionsCol && actionsHeader">
        <col [style.width.px]="150">
      </ng-container>
    </colgroup>
  </ng-template>

  <ng-template pTemplate="header" let-columns>
    <tr>
      <ng-container *ngFor="let col of columns">
        <th *ngIf="col.sortable !== false" [pSortableColumn]="col.field">
          {{ col.header }}
          <p-sortIcon [field]="col.field"></p-sortIcon>
        </th>
        <th *ngIf="col.sortable === false">
          {{ col.header }}
        </th>
      </ng-container>
      <th *ngIf="actionsHeader">
        <ng-container *ngTemplateOutlet="actionsHeader"></ng-container>
      </th>
    </tr>
  </ng-template>

  <ng-template pTemplate="body" let-rowData let-i="rowIndex" let-columns="columns">
    <tr>
      <td *ngFor="let col of columns">
        {{ col.format ? col.format(getRowData(rowData, col.field), i, rowData) || '' : getRowData(rowData, col.field) }}
      </td>
      <td *ngIf="actionsBody">
        <ng-container *ngTemplateOutlet="actionsBody; context: { rowData: rowData, rowIndex: i, columns: columns }">
        </ng-container>
      </td>
    </tr>
  </ng-template>

  <ng-template pTemplate="emptymessage" let-columns>
    <tr>
      <td [attr.colspan]="columns.length + (actionsHeader ? 1 : 0)" style="text-align: center;">
        Записей не найдено
      </td>
    </tr>
  </ng-template>

</p-table>
